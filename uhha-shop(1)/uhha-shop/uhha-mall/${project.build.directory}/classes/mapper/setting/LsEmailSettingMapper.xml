<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.uhha.setting.mapper.LsEmailSettingMapper">

    <resultMap type="LsEmailSetting" id="LsEmailSettingResult">
        <result property="id" column="id"/>
        <result property="senderMail" column="sender_mail"/>
        <result property="senderName" column="sender_name"/>
        <result property="smtpServer" column="smtp_server"/>
        <result property="smtpPort" column="smtp_port"/>
        <result property="username" column="username"/>
        <result property="password" column="password"/>
        <result property="accessKey" column="access_key"/>
        <result property="secretKey" column="secret_key"/>
        <result property="url" column="url"/>
        <result property="isUse" column="is_use"/>
    </resultMap>

    <sql id="selectLsEmailSettingVo">
        select id, sender_mail, sender_name, smtp_server, smtp_port, username, password, access_key, secret_key, url, is_use from ls_email_setting
    </sql>


    <select id="selectActiveEmailSetting" resultMap="LsEmailSettingResult">
        <include refid="selectLsEmailSettingVo"/>
        where is_use = '1'
    </select>

    <select id="selectLsEmailSettingList" parameterType="LsEmailSetting" resultMap="LsEmailSettingResult">
        <include refid="selectLsEmailSettingVo"/>
        <where>
            <if test="senderMail != null  and senderMail != ''">and sender_mail = #{senderMail}</if>
            <if test="senderName != null  and senderName != ''">and sender_name like concat('%', #{senderName}, '%')
            </if>
            <if test="smtpServer != null  and smtpServer != ''">and smtp_server = #{smtpServer}</if>
            <if test="smtpPort != null ">and smtp_port = #{smtpPort}</if>
            <if test="username != null  and username != ''">and username like concat('%', #{username}, '%')</if>
            <if test="password != null  and password != ''">and password = #{password}</if>
            <if test="isUse != null  and isUse != ''">and is_use = #{isUse}</if>
        </where>
    </select>

    <select id="selectLsEmailSettingById" parameterType="Long" resultMap="LsEmailSettingResult">
        <include refid="selectLsEmailSettingVo"/>
        where id = #{id}
    </select>

    <insert id="insertLsEmailSetting" parameterType="LsEmailSetting" useGeneratedKeys="true" keyProperty="id">
        insert into ls_email_setting
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="senderMail != null and senderMail != ''">sender_mail,</if>
            <if test="senderName != null and senderName != ''">sender_name,</if>
            <if test="smtpServer != null and smtpServer != ''">smtp_server,</if>
            <if test="smtpPort != null">smtp_port,</if>
            <if test="username != null and username != ''">username,</if>
            <if test="password != null and password != ''">password,</if>
            <if test="accessKey != null and accessKey != ''">access_key,</if>
            <if test="secretKey != null and secretKey != ''">secret_key,</if>
            <if test="url != null and url != ''">url,</if>
            <if test="isUse != null and isUse != ''">is_use,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="senderMail != null and senderMail != ''">#{senderMail},</if>
            <if test="senderName != null and senderName != ''">#{senderName},</if>
            <if test="smtpServer != null and smtpServer != ''">#{smtpServer},</if>
            <if test="smtpPort != null">#{smtpPort},</if>
            <if test="username != null and username != ''">#{username},</if>
            <if test="password != null and password != ''">#{password},</if>
            <if test="accessKey != null and accessKey != ''">#{accessKey},</if>
            <if test="secretKey != null and secretKey != ''">#{secretKey},</if>
            <if test="url != null and url != ''">#{url},</if>
            <if test="isUse != null and isUse != ''">#{isUse},</if>
        </trim>
    </insert>

    <update id="updateLsEmailSetting" parameterType="LsEmailSetting">
        update ls_email_setting
        <trim prefix="SET" suffixOverrides=",">
            <if test="senderMail != null and senderMail != ''">sender_mail = #{senderMail},</if>
            <if test="senderName != null and senderName != ''">sender_name = #{senderName},</if>
            <if test="smtpServer != null and smtpServer != ''">smtp_server = #{smtpServer},</if>
            <if test="smtpPort != null">smtp_port = #{smtpPort},</if>
            <if test="username != null and username != ''">username = #{username},</if>
            <if test="password != null and password != ''">password = #{password},</if>
            <if test="accessKey != null and accessKey != ''">access_key = #{accessKey},</if>
            <if test="secretKey != null and secretKey != ''">secret_key = #{secretKey},</if>
            <if test="url != null and url != ''">url = #{url},</if>
            <if test="isUse != null and isUse != ''">is_use = #{isUse},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteLsEmailSettingById" parameterType="Long">
        delete from ls_email_setting where id = #{id}
    </delete>

    <delete id="deleteLsEmailSettingByIds" parameterType="String">
        delete from ls_email_setting where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>